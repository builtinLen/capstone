(this["webpackJsonpspotify-clone"]=this["webpackJsonpspotify-clone"]||[]).push([[0],{123:function(e,t,a){},157:function(e,t,a){e.exports=a(225)},162:function(e,t,a){},180:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(13),s=a.n(r);a(162);const c=Object(l.createContext)(),i=e=>{let{reducer:t,initialState:a,children:r}=e;return n.a.createElement(c.Provider,{value:Object(l.useReducer)(t,a)},r)},o=()=>Object(l.useContext)(c);var m=a(16);var d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=sessionStorage.getItem(e)||t,[n,r]=Object(l.useState)(a);return Object(l.useEffect)(()=>{null===n?sessionStorage.removeItem(e):sessionStorage.setItem(e,n)},[e,n]),[n,r]};var u=n.a.createContext(),E=a(82),g=a.n(E),p=a(83),v=a.n(p);const y=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_URL||"http://localhost:3001";class h{static async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";console.debug("API Call:",e,t,a);const l="".concat(y,"/").concat(e),n={Authorization:"Bearer ".concat(h.token)},r="get"===a?t:{};try{return(await v()({url:l,method:a,data:t,headers:n,params:r})).data}catch(s){console.error("API Error:",s.response)}}static async addNewUser(e){return(await this.request("users",e,"post")).user}static async newPlaylist(e){return(await this.request("playlists",e,"post")).playlist}static async getPlaylists(){return(await this.request("playlists")).playlists}static async getPlaylist(e){return(await this.request("playlists/".concat(e))).playlist}static async savePlaylist(e,t){return(await this.request("playlists/".concat(e),t,"patch")).playlist}static async deletePlaylist(e){await this.request("playlists/".concat(e),{},"delete")}static async addSong(e){return(await this.request("songs",e,"post")).song}static async addSongToPlaylist(e,t){return(await this.request("playlists/".concat(e,"/songs/").concat(t),{},"post")).song}static async getSongCount(){return+(await this.request("songs")).count.total_songs}static async removeSongFromPlaylist(e,t){await this.request("playlists/".concat(e,"/song/").concat(t),{},"delete")}static async addAlbum(e){return(await this.request("albums",e,"post")).album}static async getAlbums(){return(await this.request("albums")).albums}static async addArtist(e){return(await this.request("artists",e,"post")).artist}static async getArtists(){return(await this.request("artists",{})).artists}}var b=h,S=a(15);const f=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=a.length,n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*l));return t}(16);const N=async()=>(await v.a.post("https://accounts.spotify.com/api/token","grant_type=client_credentials",{headers:{Authorization:"Basic ZDM1N2EyNWVmZjc1NGU0NDllNmFkMTljYTY3OTc4ZjU6Njk3ODM2OGQwOTY5NDUxM2JkNjBmMjY3ZmU5OWYxN2Q="}})).data;N();"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("d357a25eff754e449e6ad19ca67978f5","&scopes=").concat(["user-read-private"].join("%20"),"&redirect_uri=").concat("http://lennyscapstoncelone.surge.sh/","&response_type=token&show_dialog=true&state=").concat(f);a(180);var _=()=>{const e=Object(S.f)(),[{},t]=o();return n.a.createElement("div",{className:"Login"},n.a.createElement("div",{className:"Spotify-logo"},n.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_White.png",alt:""})),n.a.createElement("div",{className:"Login-options"},n.a.createElement("button",{onClick:async()=>{try{const a=await N();sessionStorage.setItem("spotify_access_token",a.access_token),sessionStorage.setItem("spotify_expires_in",a.expires_in),sessionStorage.setItem("spotify_token_type",a.token_type),t({type:"SET_TOKEN",token:a.access_token})}catch(a){console.error(a)}finally{e.push("/")}},title:"*uses a generic account"},"Login")))},k=a(287),T=a(293),P=a(55),C=a.n(P);var w=()=>{const[{token:e},t]=o(),{searchFor:a}=Object(l.useContext)(u),[r,s]=Object(l.useState)("");return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:e?e=>{e.preventDefault(),t({type:"SET_SEARCHTERM",searchTerm:r}),a(r.trim()||void 0),s(r.trim()),t({type:"SET_SEARCH_RESULTS",searchResults:[]})}:e=>{e.preventDefault(),alert("You must be logged in to do that")}},n.a.createElement(k.a,{type:"text",placeholder:e?"Search for Songs, Artists, or Albums":"You must login in order to search for songs",value:r,onChange:e=>{s(e.target.value)},InputProps:{style:{border:"none",alignItems:"center",backgroundColor:"white",color:"black",borderRadius:"30px",minWidth:"80px",width:"25vw",height:"2.5em",padding:"10px",margin:"5px 10px"},disableUnderline:!0,startAdornment:n.a.createElement(T.a,{position:"start"},n.a.createElement(C.a,null))}})))};a(191);var L=()=>n.a.createElement("nav",{className:"TabNav"},[{title:"Playlists",path:"/library"},{title:"Podcasts",path:"/library/podcasts"},{title:"Artists",path:"/library/artists"},{title:"Albums",path:"/library/albums"}].map(e=>n.a.createElement(m.c,{key:e.title,className:"tabBtn",to:e.path,exact:!0,activeClassName:"activeTabBtn"},n.a.createElement("h3",null,e.title)))),A=(a(192),a(102)),I=a.n(A),O=a(294);var j=()=>{const[{token:e,user:t}]=o(),{logout:a}=Object(l.useContext)(u),r=Object(S.g)(),s=Object(S.f)(),[c,i]=Object(l.useState)(!1),m=()=>{i(!0!==c)};return n.a.createElement("div",{className:"Header"},n.a.createElement("div",{className:"Header-left"},n.a.createElement("button",{onClick:()=>{s.goBack()}},n.a.createElement(I.a,{className:"back-btn"})),n.a.createElement("button",{onClick:()=>{s.goForward()}},n.a.createElement(I.a,{className:"forward-btn"})),"/search"===r.pathname?n.a.createElement(w,{className:"Header-searchbar"}):null,r.pathname.startsWith("/library")?n.a.createElement(L,null):null),n.a.createElement("div",{className:"Header-right"},e?n.a.createElement("div",{className:"Header-avatar",onMouseEnter:m,onMouseLeave:m},n.a.createElement(O.a,{src:null===t||void 0===t?void 0:t.images[0].url,alt:null===t||void 0===t?void 0:t.display_name}),c&&n.a.createElement("div",{className:"Header-logout"},n.a.createElement("button",{title:"Add to this playlist",onClick:a},"Logout")),n.a.createElement("h4",null,t?t.display_name:"testuser")):n.a.createElement("a",{href:"/welcome",title:"Login with your spotify to search for songs and them to playlists!"},"Login")))};a(193);var x=e=>{let{title:t,Icon:a,img:l}=e;return n.a.createElement("div",{className:"SidebarOption"},a&&n.a.createElement(a,{className:"SidebarOption-icon",fontSize:"medium"}),l&&n.a.createElement("img",{src:l,alt:"Liked Songs Icon",className:"SidebarOption-liked"}),a||l?n.a.createElement("h4",null,t):n.a.createElement("p",null,t))},D=a(130),R=a.n(D);a(204),a(205);var M=()=>{const[e,t]=Object(l.useState)(!1),a=()=>{t(!e)};return n.a.createElement("div",{className:"SlidingPanel"},n.a.createElement("div",{style:{marginTop:"1em"}},n.a.createElement("button",{onClick:a},!1===e?"Click Here!":"Close")),n.a.createElement(R.a,{className:"Pop-out-slider",isOpen:e,title:"Spotify Web Player Clone",from:"left",width:"18em",onRequestClose:a},n.a.createElement("div",{className:"Pop-out-slider-content"},n.a.createElement("p",null,"*made by",n.a.createElement("a",{href:"https://github.com/builtinlen",target:"_blank",rel:"noopener noreferrer"}," ","Lenny Rodriguez")),n.a.createElement("br",null),n.a.createElement("a",{href:"https://github.com/builtinLen/capstone",target:"_blank",rel:"noopener noreferrer"}," ","Github Repo"),n.a.createElement("div",{className:"Pop-out-slider-links"},n.a.createElement("a",{href:"www.linkedin.com/in/lennyrodriguez000",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/174/174857.png",alt:"LinkedIn",title:"LinkedIn",width:"30px",height:"30px"})),n.a.createElement("a",{href:"https://github.com/builtinlen",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{src:"https://www.nicepng.com/png/full/52-520535_free-files-github-github-icon-png-white.png",alt:"GitHub",title:"GitHub",width:"30px",height:"30px"}))),n.a.createElement("p",null,"Application data sourced from"," ",n.a.createElement("a",{href:"https://developer.spotify.com/documentation/web-api/",target:"_blank",rel:"noopener noreferrer"},"Spotify API")),n.a.createElement("br",null),n.a.createElement("p",null,"PLAYER DOES NOT ACTUALLY PLAY MUSIC"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("p",null,"*This application is not produced, endorsed, supported, or affiliated with Spotify or its affiliated companies"),n.a.createElement("br",null),n.a.createElement("br",null))))},F=(a(206),a(131)),Y=a.n(F),B=a(132),G=a.n(B),H=a(133),U=a.n(H),V=a(56),W=a.n(V);var q=()=>{var e;const[{playlists:t,token:a,user:l},r]=o(),s=null===(e=t[0])||void 0===e?void 0:e.id,c={name:"My Playlist #".concat(s+1),description:"",username:(null===l||void 0===l?void 0:l.id)||"testuser",image:"https://assets.audiomack.com/jojo-1264/82a10a07eff76040ec325e3498c6d6c7.jpeg?type=song&width=280&height=280&max=true"};return n.a.createElement("div",{className:"Sidebar"},n.a.createElement(M,null),n.a.createElement("div",{className:"Sidebar-nav"},n.a.createElement("img",{className:"Sidebar-logo",src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_RGB_White.png",alt:"sidebar_logo"}),n.a.createElement(m.c,{to:"/"},n.a.createElement(x,{title:"Home",Icon:Y.a})),n.a.createElement(m.c,{to:"/search"},n.a.createElement(x,{title:"Search",Icon:C.a})),n.a.createElement(m.c,{to:"/library"},n.a.createElement(x,{title:"Your Library",Icon:G.a})),n.a.createElement("br",null),n.a.createElement("button",{onClick:async e=>{e.preventDefault();try{await b.newPlaylist(c);const e=await b.getPlaylists();r({type:"SET_PLAYLISTS",playlists:e})}catch(t){return void console.error(t)}}},n.a.createElement(x,{title:"Create Playlist",Icon:U.a})),n.a.createElement(x,{title:"Liked Songs",Icon:W.a,img:"https://community.spotify.com/t5/image/serverpage/image-id/104727iC92B541DB372FBC7/image-size/large?v=v2&px=999"})),n.a.createElement("div",{className:"Sidebar-playlists"},null===t||void 0===t?void 0:t.map(e=>n.a.createElement(m.c,{to:"/playlists/".concat(e.handle),key:e.id},n.a.createElement(x,{title:e.name}))),a&&n.a.createElement(m.c,{to:"/playlist/discover"},n.a.createElement(x,{title:"Discover Weekly"}))))};a(207);var z=e=>{let{value:t,minValue:a,maxValue:l,handleChange:r}=e;return n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{className:"slider",key:"volume-slider",type:"range",name:"volume",value:t,min:a,max:l,onChange:r,"data-testid":"slider"}))},J=(a(208),a(57)),K=a.n(J),Z=a(87),Q=a.n(Z),X=a(135),$=a.n(X),ee=a(136),te=a.n(ee),ae=a(134),le=a.n(ae),ne=a(137),re=a.n(ne),se=a(139),ce=a.n(se),ie=a(140),oe=a.n(ie),me=a(86),de=a.n(me),ue=a(138),Ee=a.n(ue),ge=a(284);var pe=()=>{const[{isPlaying:e,isShuffling:t,isRepeated:a,volume:r,trackData:s,playerTime:c},i]=o(),{getSongDuration:m}=Object(l.useContext)(u),d=()=>{e&&!s&&alert("Pick a song first to start playing! \n **Doesn't actually play sound**"),c>(null===s||void 0===s?void 0:s.duration_ms)&&(i({type:"SET_PLAYER_TIMELINE",playerTime:0}),i({type:"SET_PLAYING",isPlaying:!0})),i({type:"SET_PLAYING",isPlaying:!e})};return Object(l.useEffect)(()=>{let t;return e&&(t=setInterval(()=>{c<(null===s||void 0===s?void 0:s.duration_ms)?i({type:"SET_PLAYER_TIMELINE",playerTime:c+1e3}):(d(),clearInterval(t))},1e3)),()=>clearInterval(t)},[e,c,i,d,null===s||void 0===s?void 0:s.duration_ms]),n.a.createElement("div",{className:"Footer"},n.a.createElement("div",{className:"Footer-left"},s?n.a.createElement("img",{className:"Footer-albumLogo",src:s.image,alt:""}):null,n.a.createElement("div",{className:"Footer-songInfo"},n.a.createElement("h4",null,null===s||void 0===s?void 0:s.name),n.a.createElement("p",null,n.a.createElement("span",null,(null===s||void 0===s?void 0:s.explicit)&&n.a.createElement(K.a,{fontSize:"small"})," "),null===s||void 0===s?void 0:s.artist_name))),n.a.createElement("div",{className:"Footer-center"},n.a.createElement("div",{className:"Footer-center-controls"},n.a.createElement(le.a,{className:t?"Footer-green":"",onClick:()=>{i({type:"SET_SHUFFLING",isShuffling:!t})}}),n.a.createElement($.a,{fontSize:"large",className:"Footer-icon"}),e?n.a.createElement(de.a,{className:"Footer-icon",onClick:d}):n.a.createElement(Q.a,{className:"Footer-icon",onClick:d}),n.a.createElement(te.a,{fontSize:"large",className:"Footer-icon"}),n.a.createElement(re.a,{className:a?"Footer-green":"",onClick:()=>{i({type:"SET_REPEATED",isRepeated:!a})}})),n.a.createElement("div",{className:"Footer-control-timeline"},n.a.createElement("div",null,n.a.createElement("span",null,s&&m(c))),n.a.createElement("div",{className:"Footer-control-slider"},n.a.createElement(z,{value:c,minValue:0,maxValue:null===s||void 0===s?void 0:s.duration_ms,handleChange:e=>{i({type:"SET_PLAYER_TIMELINE",playerTime:parseInt(e.target.value)})}})),n.a.createElement("div",null,n.a.createElement("span",null,s&&m(null===s||void 0===s?void 0:s.duration_ms))))),n.a.createElement("div",{className:"Footer-right"},n.a.createElement(ge.a,{container:!0,spacing:2},n.a.createElement(ge.a,{item:!0},n.a.createElement(Ee.a,null)),n.a.createElement(ge.a,{item:!0},0===r?n.a.createElement(ce.a,{onClick:()=>{const e=parseInt(JSON.parse(sessionStorage.getItem("unMuteVariable")));i({type:"SET_VOLUME",volume:e})}}):n.a.createElement(oe.a,{onClick:()=>{i({type:"SET_VOLUME",volume:0})}})),n.a.createElement(ge.a,{item:!0,xs:!0,className:"progressBar"},n.a.createElement(z,{value:r,minValue:0,maxValue:100,handleChange:e=>{i({type:"SET_VOLUME",volume:parseInt(e.target.value)}),sessionStorage.setItem("unMuteVariable",JSON.stringify(e.target.value))}})))))};a(209);var ve=e=>{let{data:t}=e;return n.a.createElement("div",{className:"PlaylistCardSBox"},n.a.createElement(m.b,{to:"/playlists/".concat(null===t||void 0===t?void 0:t.handle),"data-testid":"playlist-link"},n.a.createElement("div",{className:"PlaylistCardS"},n.a.createElement("div",{className:"PlaylistCardS-ImgBox"},n.a.createElement("img",{src:null===t||void 0===t?void 0:t.image,alt:"".concat(null===t||void 0===t?void 0:t.name," playlist cover")})),n.a.createElement("div",{className:"PlaylistCardS-Title"},n.a.createElement("h3",null,null===t||void 0===t?void 0:t.name)))))};a(210);var ye=e=>{let{data:t}=e;return n.a.createElement("div",{className:"PlaylistCardMBox"},n.a.createElement(m.b,{to:"/playlists/".concat(null===t||void 0===t?void 0:t.handle),"data-testid":"playlist-link"},n.a.createElement("div",{className:"PlaylistCardM"},n.a.createElement("div",{className:"PlaylistCardM-ImgBox"},n.a.createElement("img",{src:null===t||void 0===t?void 0:t.image,alt:"".concat(null===t||void 0===t?void 0:t.name," playlist cover")})),n.a.createElement("div",{className:"PlaylistCardM-Title"},n.a.createElement("h3",null,null===t||void 0===t?void 0:t.name),n.a.createElement("p",null,null===t||void 0===t?void 0:t.description)))))};a(211);var he=()=>{const[{playlists:e}]=o();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"Home"},n.a.createElement(q,null),n.a.createElement("div",{className:"Home-body"},n.a.createElement(j,null),n.a.createElement("div",{className:"Home-content"},n.a.createElement("section",null,n.a.createElement("div",{className:"Section-title"},n.a.createElement("h2",null,"Good afternoon")),n.a.createElement("div",{className:"Section-cards"},e.slice(0,4).map(e=>n.a.createElement(ve,{key:e.name,data:e})))),n.a.createElement("section",null,n.a.createElement("div",{className:"Section-title"},n.a.createElement("h2",null,"Soundtrack your day")),n.a.createElement("div",{className:"Section-cards"},e.slice(0,10).map(e=>n.a.createElement(ye,{key:e.name,data:e}))))))),n.a.createElement(pe,null))};const be=[{bgcolor:"rgb(75, 145, 125)",imgurl:"https://t.scdn.co/images/4b7472015a274eadbc00119f5141e548.jpeg",title:"Top Lists"},{bgcolor:"rgb(245, 155, 35)",imgurl:"https://t.scdn.co/images/9676cef74ec147a48607c737c4f93943.jpeg",title:"Hip-Hop"},{bgcolor:"rgb(235, 30, 50)",imgurl:"https://t.scdn.co/images/31c85ae6fec34a16927ef28a7a88e97b.jpeg",title:"Rock"},{bgcolor:"rgb(160, 195, 210)",imgurl:"https://t.scdn.co/images/68433b0ee5b5465b8e926c42b84cbcdb.jpeg",title:"Daily Mixes"},{bgcolor:"rgb(76, 126, 148)",imgurl:"https://t.scdn.co/images/0f2f4c71c9714cc5b757f7bb3559fcdb.jpeg",title:"Jazz"},{bgcolor:"rgb(99, 127, 31)",imgurl:"https://t.scdn.co/images/fe06caf056474bc58862591cd60b57fc.jpeg",title:"Indie"},{bgcolor:"rgb(160, 195, 210)",imgurl:"https://t.scdn.co/images/acc7b5d7b1264d0593ec05c020d0a689.jpeg",title:"New Music Fridays"},{bgcolor:"rgb(252, 198, 111)",imgurl:"https://t.scdn.co/media/links/workout-274x274.jpg",title:"Workout"},{bgcolor:"rgb(245, 155, 35)",imgurl:"https://t.scdn.co/images/ad4d5c268a214f78920517e76e6ed107.jpeg",title:"Podcasts"},{bgcolor:"rgb(32, 53, 98)",imgurl:"https://t.scdn.co/media/derived/edm-274x274_0ef612604200a9c14995432994455a6d_0_0_274_274.jpg",title:"Dance / Electronic"},{bgcolor:"rgb(180, 155, 200)",imgurl:"https://t.scdn.co/images/d0fb2ab104dc4846bdc56d72b0b0d785.jpeg",title:"Discover"},{bgcolor:"rgb(111, 111, 111)",imgurl:"https://t.scdn.co/images/ffbc60a80ba64554ac09130827c43d06.jpeg",title:"Metal"},{bgcolor:"rgb(195, 240, 200)",imgurl:"https://t.scdn.co/images/d355f48a90b64c25b6e004179a596e51.jpeg",title:"Pop"},{bgcolor:"rgb(255, 100, 55)",imgurl:"https://t.scdn.co/images/60075fbc12304968941c7445a971fb9d.jpeg",title:"Concerts"},{bgcolor:"rgb(80, 155, 245)",imgurl:"https://t.scdn.co/images/baf681efc57145e180589e027496b101.jpeg",title:"Happy"},{bgcolor:"rgb(245, 155, 35)",imgurl:"https://t.scdn.co/images/194b9d722de34cefb3b716c653b4526b.png",title:"Work"},{bgcolor:"rgb(160, 195, 210)",imgurl:"https://t.scdn.co/images/2470fe22d03a4375a9501dce8cfb2b8c.jpeg",title:"Chill"},{bgcolor:"rgb(180, 155, 200)",imgurl:"https://t.scdn.co/images/cf23ab0343e047daa88703e21c01a4aa.jpeg",title:"Classical"}];a(212);var Se=e=>{let{cardData:t}=e;return n.a.createElement("div",{key:t.title,className:"SearchCardBox",style:{backgroundColor:"".concat(t.bgcolor)},"data-testid":"card-box"},n.a.createElement("div",{className:"SearchCard"},n.a.createElement("img",{src:t.imgurl,alt:"".concat(t.title," cover")}),n.a.createElement("h2",null,t.title)))},fe=(a(213),a(88)),Ne=a.n(fe),_e=a(89),ke=a.n(_e);var Te=e=>{let{trackData:t="test",handleAlert:a}=e;const r=new g.a,[{playlists:s},c]=o(),{getSongDuration:i}=Object(l.useContext)(u),[m,d]=Object(l.useState)(!1),[E,p]=Object(l.useState)(!1),v=Object(l.useRef)(null),[y,h]=Object(l.useState)(""),S={id:t.id,name:t.name,duration_ms:t.duration_ms,explicit:t.explicit,artist_id:t.artists[0].id,album_id:t.album.id,image:t.album.images[1].url},f={id:t.album.id,name:t.album.name,artist_id:t.artists[0].id,release_date:t.album.release_date,image:t.album.images[1].url},N={id:t.artists[0].id,name:t.artists[0].name,image:y},_={id:t.id,name:t.name,duration_ms:t.duration_ms,explicit:t.explicit,artist_name:t.artists[0].name,image:t.album.images[1].url},k=()=>{d(!m)};return Object(l.useEffect)(()=>{function e(e){v.current&&!v.current.contains(e.target)&&p(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[v]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"SongCardBox"},n.a.createElement("div",{className:"SongCard",onClick:()=>{c({type:"SET_SONG",trackData:_}),c({type:"SET_PLAYING",isPlaying:!1}),c({type:"SET_PLAYER_TIMELINE",playerTime:0})}},n.a.createElement("div",{className:"SongCard-img"},n.a.createElement("img",{src:t.album.images[2].url,alt:""})),n.a.createElement("div",{className:"SongCard-credits"},n.a.createElement("h3",null,t.name),n.a.createElement("p",null,t.explicit&&n.a.createElement(K.a,null),t.artists.map(e=>e.name).join(", "))),n.a.createElement("div",{className:"SongCard-icons"},n.a.createElement("div",{className:"SongCard-like"},m?n.a.createElement(W.a,{onClick:k,className:"Playlist-heart-filled"}):n.a.createElement(Ne.a,{onClick:k,className:"Playlist-heart-outline"})),n.a.createElement("div",{className:"SongCard-song-duration"},i(t.duration_ms)),n.a.createElement("div",{className:"SongCard-more"},n.a.createElement("div",{onClick:()=>(async()=>{p(!0);let e=await r.getArtist(t.artists[0].id);h(e.images[1].url)})()},n.a.createElement(ke.a,null),E&&n.a.createElement("div",{className:"Playlist-add",ref:v},"Add to playlist:",s.map(e=>n.a.createElement("button",{key:e.handle,title:"Add to this playlist",onClick:()=>{(async e=>{try{let t=await b.getSongCount();await b.addArtist(N),await b.addAlbum(f),await b.addSong(S),await b.addSongToPlaylist(e,t+1),a()}catch(t){return void console.error(t)}})(e.id)}},n.a.createElement("span",null,e.name))))))))))},Pe=(a(214),a(290)),Ce=a(289),we=a(288);const Le=n.a.forwardRef((function(e,t){return n.a.createElement(we.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))}));var Ae=()=>{var e,t;const[{token:a,searchTerm:r,searchResults:s}]=o(),[c,i]=Object(l.useState)(!1),m=()=>{i(!0)},d=(e,t)=>{"clickaway"!==t&&i(!1)};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"Search"},n.a.createElement(q,null),n.a.createElement("div",{className:"Search-body"},n.a.createElement(j,null),n.a.createElement("div",{className:"Search-content"},n.a.createElement("h2",null,"Browse all"),n.a.createElement("div",{className:r&&a?"ResultsCardGrid":"SearchCardGrid"},r&&a?null===s||void 0===s||null===(e=s.tracks)||void 0===e?void 0:e.items.map((e,t)=>n.a.createElement(Te,{key:t,trackData:e,handleAlert:m})):be.map(e=>n.a.createElement(Se,{key:e.title,cardData:{bgcolor:e.bgcolor,title:e.title,imgurl:e.imgurl}})),0===(null===s||void 0===s||null===(t=s.tracks)||void 0===t?void 0:t.total)?'There are no results for "'.concat(r,'"'):null),n.a.createElement(Pe.a,{spacing:2,sx:{width:"100%"}},n.a.createElement(Ce.a,{open:c,autoHideDuration:4e3,onClose:d,anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(Le,{onClose:d,severity:"success",sx:{width:"100%",bottom:"10em"}},"Song was successfully added!")))))),n.a.createElement(pe,null))};a(218);var Ie=e=>{let{data:t,borderRadius:a}=e;return n.a.createElement("div",{className:"InfoCardMBox"},n.a.createElement("div",{className:"InfoCardM"},n.a.createElement("div",{className:a},n.a.createElement("img",{src:null===t||void 0===t?void 0:t.image,alt:(null===t||void 0===t?void 0:t.name)||""})),n.a.createElement("div",{className:"InfoCardM-Title"},n.a.createElement("h3",null,null===t||void 0===t?void 0:t.name),n.a.createElement("p",null,(null===t||void 0===t?void 0:t.description)?null===t||void 0===t?void 0:t.description:"Artist"))))};a(219);const Oe=()=>{const[{playlists:e}]=o();return n.a.createElement("div",null,n.a.createElement("h2",null,"Playlists"),n.a.createElement("div",{className:"Grid"},e.map(e=>n.a.createElement(ye,{key:e.name,data:e}))))},je=()=>n.a.createElement("div",null,n.a.createElement("h2",null,"Podcasts"),n.a.createElement("div",{className:"Grid"},n.a.createElement("p",null,"You have no favorited podcasts."))),xe=()=>{const[{artists:e}]=o();return n.a.createElement("div",null,n.a.createElement("h2",null,"Artists"),n.a.createElement("div",{className:"Grid"},e.map(e=>n.a.createElement(Ie,{key:e.name,data:e,borderRadius:"InfoCardM-ImgBox-Artist"}))))},De=()=>{const[{albums:e}]=o();return n.a.createElement("div",null,n.a.createElement("h2",null,"Albums"),n.a.createElement("div",{className:"Grid"},e.map(e=>n.a.createElement(Ie,{key:e.name,data:e,borderRadius:"InfoCardM-ImgBox-Album"}))))};var Re=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"Library"},n.a.createElement(q,null),n.a.createElement("div",{className:"Library-body"},n.a.createElement(j,null),n.a.createElement("div",{className:"Library-content"},n.a.createElement(S.a,{exact:!0,path:"/library"},n.a.createElement(Oe,null)),n.a.createElement(S.a,{path:"/library/podcasts"},n.a.createElement(je,null)),n.a.createElement(S.a,{path:"/library/artists"},n.a.createElement(xe,null)),n.a.createElement(S.a,{path:"/library/albums"},n.a.createElement(De,null))))),n.a.createElement(pe,null));a(220);var Me=e=>{let{playlist:t,closeModal:a}=e;const r=Object(S.f)(),[{},s]=o(),c={name:t.name,description:t.description,image:""},[i,m]=Object(l.useState)(c),d={name:i.name,handle:i.name.toLowerCase().split(" ").join("-").replace("#",""),description:i.description,image:i.image?i.image:t.image},u=e=>{const{name:t,value:a}=e.target;m(e=>({...e,[t]:a}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"EditPlaylistForm-background",onClick:a}),n.a.createElement("div",{className:"EditPlaylistForm-child"},n.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),d.name=i.name,d.handle=i.name.toLowerCase().split(" ").join("-").replace("#",""),d.description=i.description,d.image=i.image?i.image:t.image;try{const e=await b.savePlaylist(t.handle,d),l=await b.getPlaylists();s({type:"SET_PLAYLISTS",playlists:l}),r.push("/playlists/".concat(e.handle)),a()}catch(l){return void console.error(l)}},className:"EditPlaylistForm-child"},n.a.createElement("div",{className:"create-playlist-title"},"Edit ",t.name),n.a.createElement("div",{className:"create-playlist-grey"},n.a.createElement("div",{className:"playlist-inputs"},n.a.createElement("div",{className:"playlist-inputs-name"},n.a.createElement("div",{className:"input-name"},"Playlist name"),n.a.createElement("input",{name:"name",className:"playlist-input-name",placeholder:"Give it a name (or not)",onChange:u,value:i.name,maxLength:"100",autoComplete:"off",autoFocus:"autofocus",required:!0})),n.a.createElement("div",{className:"playlist-inputs-description"},n.a.createElement("div",{className:"input-name"},"Description"),n.a.createElement("textarea",{name:"description",className:"playlist-input-description",placeholder:"Say something about your new playlist",onChange:u,value:i.description,maxLength:"200",autoComplete:"off"})),n.a.createElement("div",{className:"playlist-inputs-image"},n.a.createElement("div",{className:"input-name"},"Playlist image"),n.a.createElement("input",{name:"image",type:"url",className:"playlist-input-image",placeholder:"Insert an image uri",onChange:u,value:i.image,autoComplete:"off"})))),n.a.createElement("div",{className:"EditPlaylistForm-buttons"},n.a.createElement("div",{className:"EditPlaylistForm-cancel",onClick:a},"CANCEL"),n.a.createElement("button",{type:"submit",className:"EditPlaylistForm-create"},"SAVE")))))};a(221);var Fe=e=>{let{playlist:t,handleSort:a,sortOption:r}=e;const s=Object(S.f)(),[{isPlaying:c},i]=o(),[m,d]=Object(l.useState)(!1),[u,E]=Object(l.useState)(!1),[g,p]=Object(l.useState)(!1),v=()=>{i({type:"SET_PLAYING",isPlaying:!c})},y=()=>d(!m);return n.a.createElement("div",{className:"Playlist-controls"},n.a.createElement("div",{className:"Playlist-icons"},c?n.a.createElement(de.a,{className:"Playlist-shuffle",onClick:v}):n.a.createElement(Q.a,{className:"Playlist-shuffle",onClick:v}),m?n.a.createElement(W.a,{fontSize:"large",onClick:y,className:"Playlist-heart-filled"}):n.a.createElement(Ne.a,{fontSize:"large",onClick:y,className:"Playlist-heart-outline"}),n.a.createElement("div",{className:"Playlist-edit-toggle"},n.a.createElement("div",{onClick:()=>p(!g)},n.a.createElement(ke.a,{fontSize:"large"}),g&&n.a.createElement("div",{className:"Playlist-edit-buttons"},n.a.createElement("button",{title:"Edit playlist",onClick:()=>E(!0)},"Edit"),n.a.createElement("button",{title:"Delete playlist",onClick:async()=>{if(window.confirm("Are you sure you want to delete this playlist?"))try{await b.deletePlaylist(t.id)}catch(e){return void console.error(e)}finally{const e=await b.getPlaylists();i({type:"SET_PLAYLISTS",playlists:e}),s.goBack(),console.log("Playlist successfully deleted.")}else console.log("Delete cancelled.")}},"Delete"))))),n.a.createElement("div",{className:"Playlist-sorting"},n.a.createElement(C.a,null),n.a.createElement("form",{sx:{m:1,minWidth:80},className:"Playlist-form"},n.a.createElement("select",{id:"song-order",value:r,label:"Age",onChange:a},n.a.createElement("option",{value:"",className:"sort-by",disabled:!0},"Sort by"),n.a.createElement("option",{value:"default"},"Custom order"),n.a.createElement("option",{value:"name"},"Title"),n.a.createElement("option",{value:"artist"},"Artist"),n.a.createElement("option",{value:"album"},"Album"),n.a.createElement("option",{value:"added_at"},"Date added"),n.a.createElement("option",{value:"duration"},"Duration")))),u&&n.a.createElement(Me,{playlist:t,closeModal:()=>E(!1)}))};a(222);var Ye=e=>{let{track:t="test",id:a,removeSong:r}=e;const[{trackData:s}]=o(),[c,i]=Object(l.useState)(!1),{getSongDuration:m,daysAgo:d}=Object(l.useContext)(u),E=d(t.added_at,new Date),g=e=>{const t=new Date(e),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],l=t.getDate(),n=t.getFullYear();return"".concat(a," ").concat(l,", ").concat(n)},p=()=>{i(!1===c)};return n.a.createElement(n.a.Fragment,null,n.a.createElement("td",null,a+1),n.a.createElement("td",null,n.a.createElement("div",{className:"Song-info"},n.a.createElement("div",{className:"Song-img"},n.a.createElement("img",{className:"Song-albumImg",src:t.image,alt:""})),n.a.createElement("div",{className:"Song-credits"},n.a.createElement("h3",null,n.a.createElement("span",{className:t.id===(null===s||void 0===s?void 0:s.id)?"Song-current":""},t.name)),n.a.createElement("p",null,n.a.createElement("span",null,t.explicit&&n.a.createElement(K.a,{fontSize:"small"})," "),n.a.createElement("span",null,t.artist_name))))),n.a.createElement("td",null,t.album_name),n.a.createElement("td",null,E>0?(e=>e>30?g(t.added_at):e>14?(e=Math.floor(e/7),"".concat(e," weeks ago")):e>7?(e=Math.floor(e/7),"".concat(e," week ago")):e>1?"".concat(e," days ago"):1===e?"".concat(e," day ago"):void 0)(E):"Today"),n.a.createElement("td",null,m(t.duration_ms)),n.a.createElement("td",null,n.a.createElement("div",{className:"Song-delete",onMouseEnter:p,onMouseLeave:p},c?n.a.createElement("button",{className:"Song-button-delete",onClick:()=>{r(t.key)}},"X"):n.a.createElement("button",{className:"Song-button-static",title:"remove from this playlist"},"..."))))},Be=(a(223),a(90)),Ge=a.n(Be);var He=e=>{let{songs:t,sortOption:a,removeSong:l}=e;const[{trackData:r},s]=o();return n.a.createElement("div",{className:"Playlist-songList"},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"TITLE"),n.a.createElement("th",null,"ALBUM"),n.a.createElement("th",null,"DATE ADDED"),n.a.createElement("th",null,n.a.createElement(Ge.a,null)))),n.a.createElement("tbody",null,(()=>{switch(a){case"name":return t.sort((e,t)=>e.name.localeCompare(t.name));case"artist":return t.sort((e,t)=>e.artist_name.localeCompare(t.artist_name));case"album":return t.sort((e,t)=>e.album_name.localeCompare(t.album_name));case"added_at":return t.sort((e,t)=>e.added_at.localeCompare(t.added_at));case"duration":return t.sort((e,t)=>e.duration_ms-t.duration_ms);default:return t}})().map((e,t)=>n.a.createElement("tr",{key:e.id,className:e.id===(null===r||void 0===r?void 0:r.id)?"SongList-current":"",onClick:()=>{(e=>{s({type:"SET_SONG",trackData:e}),s({type:"SET_PLAYING",isPlaying:!0}),s({type:"SET_PLAYER_TIMELINE",playerTime:0})})(e)}},n.a.createElement(Ye,{track:e,id:t,removeSong:l}))))))};a(123);var Ue=()=>{var e,t,a,r;const{handle:s}=Object(S.h)(),c=Object(S.f)(),[i,o]=Object(l.useState)(null),[m,d]=Object(l.useState)(!0),[u,E]=Object(l.useState)("default");return Object(l.useEffect)(()=>{(async()=>{try{const e=await b.getPlaylist(s);o(e)}catch(e){console.error(e),c.push("/404")}finally{d(!1),document.body.style.cursor="default"}})()},[s,c]),m?(document.body.style.cursor="progress",""):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"Playlist"},n.a.createElement(q,null),n.a.createElement("div",{className:"Playlist-body"},n.a.createElement(j,null),n.a.createElement("div",{className:"Playlist-info"},n.a.createElement("img",{src:null===i||void 0===i?void 0:i.image,alt:""}),n.a.createElement("div",{className:"Playlist-infoText"},n.a.createElement("strong",null,"PLAYLIST"),n.a.createElement("h2",null,null===i||void 0===i?void 0:i.name),n.a.createElement("p",null,null===i||void 0===i?void 0:i.description),n.a.createElement("a",{href:i?null===i||void 0===i||null===(e=i.user)||void 0===e?void 0:e.profile_url:""},n.a.createElement("div",{className:"Playlist-avatar"},n.a.createElement("img",{src:null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.image,alt:i?null===i||void 0===i||null===(a=i.user)||void 0===a?void 0:a.display_name:""}),n.a.createElement("h4",null,null===i||void 0===i||null===(r=i.user)||void 0===r?void 0:r.display_name))))),n.a.createElement("section",null,n.a.createElement(Fe,{playlist:i,handleSort:e=>E(e.target.value)}),n.a.createElement(He,{songs:null===i||void 0===i?void 0:i.songs,sortOption:u,removeSong:async e=>{try{await b.removeSongFromPlaylist(i.id,e),c.go(0)}catch(t){console.error(t)}}})))),n.a.createElement(pe,null))};var Ve=()=>{var e;const[{discover_weekly:t},a]=o(),{getSongDuration:r,daysAgo:s}=Object(l.useContext)(u);sessionStorage.setItem("spotify_discover_weekly_data",JSON.stringify(t));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"Playlist"},n.a.createElement(q,null),n.a.createElement("div",{className:"Playlist-body"},n.a.createElement(j,null),n.a.createElement("div",{className:"Playlist-info"},n.a.createElement("img",{src:null===t||void 0===t?void 0:t.images[0].url,alt:""}),n.a.createElement("div",{className:"Playlist-infoText"},n.a.createElement("strong",null,"PLAYLIST"),n.a.createElement("h2",null,"Lenny's ",null===t||void 0===t?void 0:t.name),n.a.createElement("p",null,null===t||void 0===t?void 0:t.description))),n.a.createElement("section",null,n.a.createElement(Fe,null),n.a.createElement("div",{className:"Playlist-songList"},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"TITLE"),n.a.createElement("th",null,"ALBUM"),n.a.createElement("th",null,"DATE ADDED"),n.a.createElement("th",null,n.a.createElement(Ge.a,null)))),n.a.createElement("tbody",null,null===t||void 0===t||null===(e=t.tracks)||void 0===e?void 0:e.items.map((e,t)=>{return n.a.createElement("tr",{key:t,onClick:()=>{var t;t={image:e.track.album.images[1].url,name:e.track.name,artist_name:e.track.artists[0].name,duration_ms:e.track.duration_ms,added_at:e.added_at},a({type:"SET_SONG",trackData:t}),a({type:"SET_PLAYING",isPlaying:!1})}},n.a.createElement("td",null,t+1),n.a.createElement("td",null,n.a.createElement("div",{className:"Song-info"},n.a.createElement("div",{className:"Song-img"},n.a.createElement("img",{className:"Song-albumImg",src:e.track.album.images[1].url,alt:""})),n.a.createElement("div",{className:"Song-credits"},n.a.createElement("h3",null,n.a.createElement("span",null,e.track.name)),n.a.createElement("p",null,n.a.createElement("span",null,e.track.artists.map(e=>e.name).join(", ")))))),n.a.createElement("td",null,e.track.album.name),n.a.createElement("td",null,s(e.added_at,new Date)>0?s(e.added_at,new Date):null," ",(l=s(e.added_at,new Date))>1?"days ago":1===l?"day ago":"Today"),n.a.createElement("td",null,r(e.track.duration_ms)));var l}))))))),n.a.createElement(pe,null))},We=(a(224),a(143)),qe=a.n(We);var ze=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"NotFound"},n.a.createElement(q,null),n.a.createElement("div",{className:"NotFound-body"},n.a.createElement(j,null),n.a.createElement("div",{className:"NotFound-content"},n.a.createElement(qe.a,{className:"NotFound-icon"}),n.a.createElement("h1",null,"404: Page Not Found"),n.a.createElement("p",null,"What you were looking for is just not there.")))),n.a.createElement(pe,null));var Je=()=>n.a.createElement(S.c,null,n.a.createElement(S.a,{exact:!0,path:"/welcome"},n.a.createElement(_,null)),n.a.createElement(S.a,{exact:!0,path:"/"},n.a.createElement(he,null)),n.a.createElement(S.a,{exact:!0,path:"/search"},n.a.createElement(Ae,null)),n.a.createElement(S.a,{path:"/library"},n.a.createElement(Re,null)),n.a.createElement(S.a,{exact:!0,path:"/playlist/discover"},n.a.createElement(Ve,null)),n.a.createElement(S.a,{exact:!0,path:"/playlists/:handle"},n.a.createElement(Ue,null)),n.a.createElement(S.a,null,n.a.createElement(ze,null)));const Ke=new g.a;var Ze=()=>{const[{token:e},t]=o(),[a,r]=d("spotify_access_token"),[s,c]=d("spotify_timestamp"),[i,E]=Object(l.useState)(!1);Object(l.useEffect)(()=>{E(!1),(()=>{try{(a||e)&&(s||c(Date.now()),t({type:"SET_TOKEN",token:a||e}),Ke.setAccessToken(a||e),Ke.getPlaylist("37i9dQZEVXcUfolfIkR1hC").then(e=>{t({type:"SET_DISCOVER_WEEKLY",discover_weekly:e})})),b.getPlaylists().then(e=>{t({type:"SET_PLAYLISTS",playlists:e})}),b.getArtists().then(e=>{t({type:"SET_ARTISTS",artists:e})}),b.getAlbums().then(e=>{t({type:"SET_ALBUMS",albums:e})})}catch(l){console.error(l)}E(!0)})()},[e,i,t,a,c,s]);return i?n.a.createElement("div",{className:"App"},n.a.createElement(m.a,null,n.a.createElement(u.Provider,{value:{getSongDuration:e=>{let t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a},daysAgo:(e,t)=>{const a=new Date(e),l=t.getTime()-a.getTime();return Math.round(l/864e5)},searchFor:async function(e){try{const a=await Ke.searchTracks(e);t({type:"SET_SEARCH_RESULTS",searchResults:a})}catch(a){console.error(a)}},logout:async()=>{try{await t({type:"SET_TOKEN",token:null})}catch(e){throw new Error(e)}finally{sessionStorage.clear()}}}},n.a.createElement(Je,null)))):"Loading..."};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));const Qe={user:null,token:sessionStorage.getItem("spotify_access_token")||null,searchTerm:"",searchResults:[],isPlaying:!1,isShuffling:!1,isRepeated:!1,playerTime:0,volume:sessionStorage.getItem("unMuteVariable")||50,playlists:[],artists:[],albums:[],trackData:null,discover_weekly:JSON.parse(sessionStorage.getItem("spotify_discover_weekly_data"))||[]};var Xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"SET_USER":return{...e,user:t.user};case"SET_TOKEN":return{...e,token:t.token};case"SET_SEARCHTERM":return{...e,searchTerm:t.searchTerm};case"SET_SEARCH_RESULTS":return{...e,searchResults:t.searchResults};case"SET_PLAYING":return{...e,isPlaying:t.isPlaying};case"SET_SHUFFLING":return{...e,isShuffling:t.isShuffling};case"SET_REPEATED":return{...e,isRepeated:t.isRepeated};case"SET_SONG":return{...e,trackData:t.trackData};case"SET_PLAYER_TIMELINE":return{...e,playerTime:t.playerTime};case"SET_VOLUME":return{...e,volume:t.volume};case"SET_PLAYLISTS":return{...e,playlists:t.playlists};case"SET_ARTISTS":return{...e,artists:t.artists};case"SET_ALBUMS":return{...e,albums:t.albums};case"SET_DISCOVER_WEEKLY":return{...e,discover_weekly:t.discover_weekly};default:return e}};s.a.render(n.a.createElement(i,{initialState:Qe,reducer:Xe},n.a.createElement(Ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[157,1,2]]]);
//# sourceMappingURL=main.664def2a.chunk.js.map